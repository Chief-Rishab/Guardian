"use strict";(self.webpackChunkguardian=self.webpackChunkguardian||[]).push([[944],{3905:function(e,a,t){t.d(a,{Zo:function(){return p},kt:function(){return m}});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),d=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},p=function(e){var a=d(e.components);return n.createElement(l.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(t),m=r,f=c["".concat(l,".").concat(m)]||c[m]||u[m]||i;return t?n.createElement(f,o(o({ref:a},p),{},{components:t})):n.createElement(f,o({ref:a},p))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=c;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=t[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},5574:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return c}});var n=t(7462),r=t(3366),i=(t(7294),t(3905)),o=["components"],s={},l="Grafana",d={unversionedId:"providers/grafana",id:"providers/grafana",isDocsHomePage:!1,title:"Grafana",description:"Grafana is open source visualization and analytics software. It allows you to query, visualize, alert on, and explore your metrics no matter where they are stored. In plain English, it provides you with tools to turn your time-series database \\(TSDB\\) data into beautiful graphs and visualizations.",source:"@site/docs/providers/grafana.md",sourceDirName:"providers",slug:"/providers/grafana",permalink:"/guardian/docs/providers/grafana",editUrl:"https://github.com/odpf/guardian/edit/master/docs/docs/providers/grafana.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Metabase",permalink:"/guardian/docs/providers/metabase"},next:{title:"Architecture",permalink:"/guardian/docs/concepts/architecture"}},p=[{value:"Grafana Users",id:"grafana-users",children:[]},{value:"Grafana Dashboards and Folders",id:"grafana-dashboards-and-folders",children:[]},{value:"Grafana Access Flow",id:"grafana-access-flow",children:[]},{value:"Authentication",id:"authentication",children:[]},{value:"1. Config",id:"1-config",children:[{value:"<code>GrafanaCredentials</code>",id:"grafanacredentials",children:[]},{value:"<code>GrafanaResourceType</code>",id:"grafanaresourcetype",children:[]},{value:"<code>GrafanaResourcePermission</code>",id:"grafanaresourcepermission",children:[]}]},{value:"Grafana Access Creation",id:"grafana-access-creation",children:[]}],u={toc:p};function c(e){var a=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},u,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"grafana"},"Grafana"),(0,i.kt)("p",null,"Grafana is open source visualization and analytics software. It allows you to query, visualize, alert on, and explore your metrics no matter where they are stored. In plain English, it provides you with tools to turn your time-series database ","(","TSDB",")"," data into beautiful graphs and visualizations."),(0,i.kt)("h3",{id:"grafana-users"},"Grafana Users"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Users")," are named accounts in Grafana with granted permissions to access resources throughout Grafana."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Organizations")," are groups of users on a server. Users can belong to one or more organizations, but each user must belong to at least one organization. Data sources, plugins, and dashboards are associated with organizations. Members of organizations have permissions based on their role in the organization."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Teams")," are groups of users within the same organization. Teams allow you to grant permissions for a group of users.")),(0,i.kt)("h3",{id:"grafana-dashboards-and-folders"},"Grafana Dashboards and Folders"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Dashboards")," is a set of one or more panels organized and arranged into one or more rows. Grafana ships with a variety of Panels. Each panel can interact with data from any configured Grafana Data Source."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Folders")," are a way to organize and group dashboards - very useful if you have a lot of dashboards or multiple teams using the same Grafana instance.")),(0,i.kt)("h3",{id:"grafana-access-flow"},"Grafana Access Flow"),(0,i.kt)("p",null,"Grafana itself manages its user access at both ",(0,i.kt)("em",{parentName:"p"},"folder level")," and ",(0,i.kt)("em",{parentName:"p"},"dashboard level"),", while Guardian lets each individual user have access directly at the ",(0,i.kt)("em",{parentName:"p"},"dashboard level"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Access is based on the Role a user has on a resource."),(0,i.kt)("li",{parentName:"ul"},"Roles can be either of the three:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Viewer"),(0,i.kt)("li",{parentName:"ul"},"Editor"),(0,i.kt)("li",{parentName:"ul"},"Admin"))),(0,i.kt)("li",{parentName:"ul"},"Roles are inherited from the parent folders to a dashboard."),(0,i.kt)("li",{parentName:"ul"},"Although we can assign a different but higher role at the dashboard level.")),(0,i.kt)("h2",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,"Guardian requires ",(0,i.kt)("strong",{parentName:"p"},"username")," and ",(0,i.kt)("strong",{parentName:"p"},"password")," of an administrator user in Grafana."),(0,i.kt)("p",null,"Example provider config for grafana:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"---\ncredentials:\n  host: http://localhost:3000\n  user: admin@localhost\n  password: password\n")),(0,i.kt)("h2",{id:"1-config"},"1. Config"),(0,i.kt)("h4",{id:"example"},"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'type: grafana\nurn: 1\nlabels:\n  entity: gojek\n  landscape: id\ncredentials:\n  host: http://localhost:4000\n  username: admin@localhost\n  password: password\nappeal:\n  allow_permanent_access: true\n  allow_active_access_extension_in: "7d"\nresources:\n  - type: dashboard\n    policy:\n      id: policy_x\n      version: 1\n    roles:\n      - id: viewer\n        name: Viewer\n        permissions:\n          - view\n      - id: editor\n        name: Editor\n        permissions:\n          - edit\n      - id: admin\n        name: Admin\n        permissions:\n          - admin\n')),(0,i.kt)("h3",{id:"grafanacredentials"},(0,i.kt)("inlineCode",{parentName:"h3"},"GrafanaCredentials")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Fields"),(0,i.kt)("th",{parentName:"tr",align:"left"}))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"host")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"string")," Required. Grafana instance host. Example: ",(0,i.kt)("inlineCode",{parentName:"td"},"http://localhost:3000"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"username")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"email")," Required. Email address of an account that has Administration permission.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"password")),(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"string")," Required. Account's password.")))),(0,i.kt)("h3",{id:"grafanaresourcetype"},(0,i.kt)("inlineCode",{parentName:"h3"},"GrafanaResourceType")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"folders")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"dashboards")," - Direct dashboard level access via Guardian.")),(0,i.kt)("h3",{id:"grafanaresourcepermission"},(0,i.kt)("inlineCode",{parentName:"h3"},"GrafanaResourcePermission")),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Details"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"Required. ",(0,i.kt)("inlineCode",{parentName:"td"},"string")),(0,i.kt)("td",{parentName:"tr",align:"left"},"Must have id one of ",(0,i.kt)("inlineCode",{parentName:"td"},"viewer"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"editor")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"admin"),". Must have name one of ",(0,i.kt)("inlineCode",{parentName:"td"},"Viewer"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"Editor")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"Admin"),". Must have permissions one of ",(0,i.kt)("inlineCode",{parentName:"td"},"view"),", ",(0,i.kt)("inlineCode",{parentName:"td"},"edit")," or ",(0,i.kt)("inlineCode",{parentName:"td"},"admin"),".")))),(0,i.kt)("h2",{id:"grafana-access-creation"},"Grafana Access Creation"),(0,i.kt)("p",null,"Guardian looks for the resource we want to grant access to and append new permissions to the existing ones. In case, the resource does not exist it returns errors."))}c.isMDXComponent=!0}}]);