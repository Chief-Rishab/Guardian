"use strict";(self.webpackChunkguardian=self.webpackChunkguardian||[]).push([[787],{3905:function(e,n,r){r.d(n,{Zo:function(){return c},kt:function(){return m}});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function s(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=t.createContext({}),u=function(e){var n=t.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},c=function(e){var n=u(e.components);return t.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},p=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(r),m=a,g=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return r?t.createElement(g,i(i({ref:n},c),{},{components:r})):t.createElement(g,i({ref:n},c))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=p;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=r[u];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}p.displayName="MDXCreateElement"},8215:function(e,n,r){var t=r(7294);n.Z=function(e){var n=e.children,r=e.hidden,a=e.className;return t.createElement("div",{role:"tabpanel",hidden:r,className:a},n)}},5064:function(e,n,r){r.d(n,{Z:function(){return u}});var t=r(7294),a=r(9443);var o=function(){var e=(0,t.useContext)(a.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},i=r(6010),s="tabItem_vU9c",l="tabItemActive_cw6a";var u=function(e){var n,r=e.lazy,a=e.block,u=e.defaultValue,c=e.values,d=e.groupId,p=e.className,m=t.Children.toArray(e.children),g=null!=c?c:m.map((function(e){return{value:e.props.value,label:e.props.label}})),f=null!=u?u:null==(n=m.find((function(e){return e.props.default})))?void 0:n.props.value,v=o(),b=v.tabGroupChoices,h=v.setTabGroupChoices,y=(0,t.useState)(f),k=y[0],w=y[1],T=[];if(null!=d){var N=b[d];null!=N&&N!==k&&g.some((function(e){return e.value===N}))&&w(N)}var O=function(e){var n=e.currentTarget,r=T.indexOf(n),t=g[r].value;w(t),null!=d&&(h(d,t),setTimeout((function(){var e,r,t,a,o,i,s,u;(e=n.getBoundingClientRect(),r=e.top,t=e.left,a=e.bottom,o=e.right,i=window,s=i.innerHeight,u=i.innerWidth,r>=0&&o<=u&&a<=s&&t>=0)||(n.scrollIntoView({block:"center",behavior:"smooth"}),n.classList.add(l),setTimeout((function(){return n.classList.remove(l)}),2e3))}),150))},C=function(e){var n,r=null;switch(e.key){case"ArrowRight":var t=T.indexOf(e.target)+1;r=T[t]||T[0];break;case"ArrowLeft":var a=T.indexOf(e.target)-1;r=T[a]||T[T.length-1]}null==(n=r)||n.focus()};return t.createElement("div",{className:"tabs-container"},t.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},p)},g.map((function(e){var n=e.value,r=e.label;return t.createElement("li",{role:"tab",tabIndex:k===n?0:-1,"aria-selected":k===n,className:(0,i.Z)("tabs__item",s,{"tabs__item--active":k===n}),key:n,ref:function(e){return T.push(e)},onKeyDown:C,onFocus:O,onClick:O},null!=r?r:n)}))),r?(0,t.cloneElement)(m.filter((function(e){return e.props.value===k}))[0],{className:"margin-vert--md"}):t.createElement("div",{className:"margin-vert--md"},m.map((function(e,n){return(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==k})}))))}},9443:function(e,n,r){var t=(0,r(7294).createContext)(void 0);n.Z=t},6825:function(e,n,r){r.r(n),r.d(n,{frontMatter:function(){return u},contentTitle:function(){return c},metadata:function(){return d},toc:function(){return p},default:function(){return g}});var t=r(7462),a=r(3366),o=(r(7294),r(3905)),i=r(5064),s=r(8215),l=["components"],u={},c="Managing Resources",d={unversionedId:"guides/managing-resources",id:"guides/managing-resources",isDocsHomePage:!1,title:"Managing Resources",description:"Resource in Guardian represents the actual resource in the provider e.g. for BigQuery provider, a resource represents a dataset or a table. One of Guardian's responsibility is to manage the access to resources, and in order to do that Guardian needs to be able to manage the resources as well.",source:"@site/docs/guides/managing-resources.mdx",sourceDirName:"guides",slug:"/guides/managing-resources",permalink:"/guardian/docs/guides/managing-resources",editUrl:"https://github.com/odpf/guardian/edit/master/docs/docs/guides/managing-resources.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Managing Providers",permalink:"/guardian/docs/guides/managing-providers"},next:{title:"Managing Appeals",permalink:"/guardian/docs/guides/managing-appeals"}},p=[{value:"Collecting Resources",id:"collecting-resources",children:[]},{value:"Updating Resources Metadata",id:"updating-resources-metadata",children:[]},{value:"Listing Resources",id:"listing-resources",children:[]},{value:"Viewing Resources",id:"viewing-resources",children:[]}],m={toc:p};function g(e){var n=e.components,r=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,t.Z)({},m,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"managing-resources"},"Managing Resources"),(0,o.kt)("p",null,"Resource in Guardian represents the actual resource in the provider e.g. for BigQuery provider, a resource represents a dataset or a table. One of Guardian's responsibility is to manage the access to resources, and in order to do that Guardian needs to be able to manage the resources as well."),(0,o.kt)("h2",{id:"collecting-resources"},"Collecting Resources"),(0,o.kt)("p",null,"Guardian collects resources from the provider automatically as soon as it registered. While in parallel, Guardian also has a job for continously syncing resources."),(0,o.kt)("h4",{id:"example"},"Example"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "a32b702a-029d-4d76-90c4-c3b8cc52941b",\n  "provider_type": "bigquery",\n  "provider_urn": "gcp-project-id-bigquery",\n  "type": "table",\n  "urn": "gcp-project-id:dataset_name.table_name",\n  "name": "table_name",\n  "details": {\n    "is_sensitive": false,\n    "owner": [\n      "john.doe@example.com",\n      "john.smith@example.com"\n    ]\n  }\n}\n')),(0,o.kt)("h2",{id:"updating-resources-metadata"},"Updating Resources Metadata"),(0,o.kt)("p",null,"Guardian allows users to add metadata to the resources. This can be useful when configuring the approval steps in the policy that needs information from metadata e.g. \u201cowners\u201d as the approvers."),(0,o.kt)("h4",{id:"update-a-resource-can-be-done-in-the-following-ways"},"Update a resource can be done in the following ways:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Using ",(0,o.kt)("inlineCode",{parentName:"li"},"guardian resource set")," CLI command"),(0,o.kt)("li",{parentName:"ol"},"Calling to ",(0,o.kt)("inlineCode",{parentName:"li"},"PUT /api/v1beta1/resources/:id")," API")),(0,o.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ guardian resource set --id={{resource_id}} --values=<key1>=<value1> --values=<key2>=<value2>\n"))),(0,o.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},'$ curl --request PUT \'{{HOST}}/api/v1beta1/resources/{{resource_id}}\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    "details": {\n        "key1": "value1",\n        "key2": "value2"\n    }\n}\'\n')))),(0,o.kt)("h2",{id:"listing-resources"},"Listing Resources"),(0,o.kt)("h4",{id:"listing-resources-can-be-done-in-the-following-ways"},"Listing resources can be done in the following ways:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Using ",(0,o.kt)("inlineCode",{parentName:"li"},"guardian resource list")," CLI command"),(0,o.kt)("li",{parentName:"ol"},"Calling to ",(0,o.kt)("inlineCode",{parentName:"li"},"GET /api/v1beta1/resources")," API")),(0,o.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ guardian resource list --output=yaml\n"))),(0,o.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ curl --request GET '{{HOST}}/api/v1beta1/resources'\n")))),(0,o.kt)("h2",{id:"viewing-resources"},"Viewing Resources"),(0,o.kt)("h4",{id:"viewing-a-resource-can-be-done-in-the-following-ways"},"Viewing a resource can be done in the following ways:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Using ",(0,o.kt)("inlineCode",{parentName:"li"},"guardian resource view")," CLI command"),(0,o.kt)("li",{parentName:"ol"},"Calling to ",(0,o.kt)("inlineCode",{parentName:"li"},"GET /api/v1beta1/resources/:id")," API")),(0,o.kt)(i.Z,{groupId:"api",mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"cli",label:"CLI",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ guardian resource view {{resource_id}}\n"))),(0,o.kt)(s.Z,{value:"http",label:"HTTP",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ curl --request GET '{{HOST}}/api/v1beta1/resources/{{resource_id}}'\n")))))}g.isMDXComponent=!0},6010:function(e,n,r){function t(e){var n,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(r=t(e[n]))&&(a&&(a+=" "),a+=r);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function a(){for(var e,n,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(n=t(e))&&(a&&(a+=" "),a+=n);return a}r.d(n,{Z:function(){return a}})}}]);